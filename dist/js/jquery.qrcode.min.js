!function(e){"use strict";function n(e,n,o,t){function a(e,n){return e-=t,n-=t,0>e||e>=c||0>n||n>=c?!1:l.isDark(e,n)}function i(e,n,o,t){var a=r.isDark,i=1/u;r.isDark=function(r,l){var c=l*i,u=r*i,d=c+i,s=u+i;return a(r,l)&&(e>d||c>o||n>s||u>t)}}var r={},l=qrcode(o,n);l.addData(e),l.make(),t=t||0;var c=l.getModuleCount(),u=l.getModuleCount()+2*t;return r.text=e,r.level=n,r.version=o,r.moduleCount=u,r.isDark=a,r.addBlank=i,r}function o(e,o,t,a,i){t=Math.max(1,t||1),a=Math.min(40,a||40);for(var r=t;a>=r;r+=1)try{return n(e,o,r,i)}catch(l){}}function t(n,o,t){var a=t.size,i="normal "+t.mSize*a+"px "+t.fontname,r=e("<canvas/>")[0].getContext("2d");r.font=i;var l=r.measureText(t.label).width,c=t.mSize,u=l/a,d=(1-u)*t.mPosX,s=(1-c)*t.mPosY,m=d+u,f=s+c,g=t.mPad||.01;g=u>0?g:0,1===t.mode?0===t.mBlank?n.addBlank(0,s-g,a,f+g):(o.fillStyle=t.background,o.fillRect(0,(s-g)*a,a,(c+2*g)*a)):0===t.mBlank?n.addBlank(d-g,s-g,m+g,f+g):(o.fillStyle=t.background,o.fillRect((d-g)*a,(s-g)*a,(u+2*g)*a,(c+2*g)*a)),o.fillStyle=t.fontcolor,o.font=i,o.textBaseline="middle",o.fillText(t.label,d*a,s*a+.5*t.mSize*a)}function a(e,n,o){var t=o.size,a=o.image.naturalWidth||1,i=o.image.naturalHeight||1,r=o.mSize,l=r*a/i,c=(1-l)*o.mPosX,u=(1-r)*o.mPosY,d=c+l,s=u+r,m=o.mPad||.01;m=l>0?m:0,3===o.mode?0===o.mBlank?e.addBlank(0,u-m,t,s+m):(n.fillStyle=o.background,n.fillRect(0,(u-m)*t,t,(r+2*m)*t)):0===o.mBlank?e.addBlank(c-m,u-m,d+m,s+m):(n.fillStyle=o.background,n.fillRect((c-m)*t,(u-m)*t,(l+2*m)*t,(r+2*m)*t)),n.drawImage(o.image,c*t,u*t,l*t,r*t)}function i(e,n,o){var i=o.mode;1===i||2===i?t(e,n,o):3!==i&&4!==i||a(e,n,o)}function r(n,o,t){e(t.background).is("img")?o.drawImage(t.background,0,0,t.size,t.size):t.background&&(o.fillStyle=t.background,o.fillRect(t.left,t.top,t.size,t.size)),0===t.mBlank&&i(n,o,t)}function l(e,n,o,t,a,i,r,l){e.isDark(r,l)&&n.rect(t,a,i,i)}function c(e,n,o,t,a,i,r,l,c,u){r?e.moveTo(n+i,o):e.moveTo(n,o),l?(e.lineTo(t-i,o),e.arcTo(t,o,t,a,i)):e.lineTo(t,o),c?(e.lineTo(t,a-i),e.arcTo(t,a,n,a,i)):e.lineTo(t,a),u?(e.lineTo(n+i,a),e.arcTo(n,a,n,o,i)):e.lineTo(n,a),r?(e.lineTo(n,o+i),e.arcTo(n,o,t,o,i)):e.lineTo(n,o)}function u(e,n,o,t,a,i,r,l,c,u){r&&(e.moveTo(n+i,o),e.lineTo(n,o),e.lineTo(n,o+i),e.arcTo(n,o,n+i,o,i)),l&&(e.moveTo(t-i,o),e.lineTo(t,o),e.lineTo(t,o+i),e.arcTo(t,o,t-i,o,i)),c&&(e.moveTo(t-i,a),e.lineTo(t,a),e.lineTo(t,a-i),e.arcTo(t,a,t-i,a,i)),u&&(e.moveTo(n+i,a),e.lineTo(n,a),e.lineTo(n,a-i),e.arcTo(n,a,n+i,a,i))}function d(e,n,o,t,a,i,r,l){var d=e.isDark,s=t+i,m=a+i,f=o.radius*i,g=r-1,v=r+1,k=l-1,T=l+1,b=d(r,l),p=d(g,k),h=d(g,l),x=d(g,T),z=d(r,T),B=d(v,T),C=d(v,l),S=d(v,k),y=d(r,k);b?c(n,t,a,s,m,f,!h&&!y,!h&&!z,!C&&!z,!C&&!y):u(n,t,a,s,m,f,h&&y&&p,h&&z&&x,C&&z&&B,C&&y&&S)}function s(n,o,t){var a,i,r=n.moduleCount,c=t.size/r,u=l;for(t.radius>0&&t.radius<=.5&&(u=d),o.beginPath(),a=0;r>a;a+=1)for(i=0;r>i;i+=1){var s=t.left+i*c,m=t.top+a*c,f=c;u(n,o,t,s,m,f,a,i)}if(e(t.fill).is("img")){o.strokeStyle="rgba(0,0,0,0.5)",o.lineWidth=2,o.stroke();var g=o.globalCompositeOperation;o.globalCompositeOperation="destination-out",o.fill(),o.globalCompositeOperation=g,o.clip(),o.drawImage(t.fill,0,0,t.size,t.size),o.restore()}else o.fillStyle=t.fill,o.fill()}function m(n,t){var a=o(t.text,t.ecLevel,t.minVersion,t.maxVersion,t.quiet);if(!a)return null;var l=e(n).data("qrcode",a),c=l[0].getContext("2d");return r(a,c,t),s(a,c,t),0!==t.mBlank&&i(a,c,t),l}function f(n){var o=e("<canvas/>").attr("width",n.size).attr("height",n.size);return m(o,n)}function g(n){return e("<img/>").attr("src",f(n)[0].toDataURL("image/png"))}function v(n){var t=o(n.text,n.ecLevel,n.minVersion,n.maxVersion,n.quiet);if(!t)return null;var a,i,r=n.size,l=n.background,c=Math.floor,u=t.moduleCount,d=c(r/u),s=c(.5*(r-d*u)),m={position:"relative",left:0,top:0,padding:0,margin:0,width:r,height:r},f={position:"absolute",padding:0,margin:0,width:d,height:d,"background-color":n.fill},g=e("<div/>").data("qrcode",t).css(m);for(l&&g.css("background-color",l),a=0;u>a;a+=1)for(i=0;u>i;i+=1)t.isDark(a,i)&&e("<div/>").css(f).css({left:s+i*d,top:s+a*d}).appendTo(g);return g}function k(e){return T&&"canvas"===e.render?f(e):T&&"image"===e.render?g(e):v(e)}var T=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mPad:.01,mSize:.1,mPosX:.5,mPosY:.5,mRadius:0,mBlank:0,label:"no label",fontname:"sans",fontcolor:"#000",image:null};e.fn.qrcode=function(n){var o=e.extend({},b,n);return this.each(function(n,t){"canvas"===t.nodeName.toLowerCase()?m(t,o):e(t).append(k(o))})}}(jQuery);